/*
 Apache
 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function x(e){var d=Error;function b(){}b.prototype=d.prototype;e.prototype=new b;e.prototype.constructor=e;for(var a in d)if(l.Object.defineProperties){var n=l.Object.getOwnPropertyDescriptor(d,a);void 0!==n&&l.Object.defineProperty(e,a,n)}else e[a]=d[a]}var googletag=googletag||{};googletag.cmd=googletag.cmd||[];var y=angular.module("angularDfp",[]);(function(e){e.factory("httpError",["$log",function(d){function b(a){d.error("Error ("+a.status+")")}b.Y=function(a){if("number"===typeof a)return!(200<=a&&300>a);console.assert("string"===typeof a);return"2"!==a[0]};return b}])})(y);(function(e){function d(){}x(d);d.a=Error.captureStackTrace;e.factory("parseDuration",function(){return function(b){if(void 0===b||null===b)throw new d;if("number"===typeof b)return b;if("string"!==typeof b)throw new TypeError("'"+b+"' must be of number or string type");var a=b.match(/(\d+)(m?s|min|h)?/);if(!a)throw new d;b=parseInt(a[1],10);2!==a.length&&(a=a[2],console.assert(/^(m?s|min|h)$/g.test(a)),b="ms"===a?b:"s"===a?1E3*b:"min"===a?6E4*b:36E5*b);return b}})})(y);(function(e){e.factory("responsiveResize",["$interval","$timeout","$window","dfpRefresh",function(d,b,a){a=angular.element(a);return function(n,k,f){function c(){return n.find("div iframe")}function e(a){a=a||c();a.css("width",a.attr("width")+"px");a.css("height",a.attr("height")+"px")}function p(){b(function(){n.removeClass("hidden")},1E3)}function r(a){var b=c();["width","height"].some(function(c){return b.attr(c)!==a[c]})&&e(b)}function u(a){var c=d(function(){return r(a)},100);b(function(){return d.cancel(c)},
2500)}function g(){var a=c(),a=[a.css("width"),a.css("height")].map(function(a){return a?a.slice(0,-2):null});return{width:a[0],height:a[1]}}function v(){u(g());a.on("resize",function(){e()});p()}f=f||[320,780,1480];console.assert(Array.isArray(f));a.on("resize",function(){function b(a){console.assert(0<=c&&c<f.length);console.assert(-1===a||1===a);c+=a;n.addClass("hidden");console.assert(0<=c&&c<f.length)}var c=function(){for(var b=a.innerWidth,c=f.length-1,n=0;n<c;++n)if(b<f[n+1])return n;return c}();
v();return function(){c+1>=f.length||a.innerWidth<f[c+1]?0>c-1||a.innerWidth>=f[c]||b(-1):b(1)}}())}}])})(y);(function(e){e.factory("scriptInjector",["$q","httpError",function(d,b){function a(a,k){function f(){e.resolve()}function c(a){a=a||{status:400};b(a,'loading script "{0}".',k);e.reject(a)}var e=d.defer();a.onreadystatechange=function(){4===this.readyState&&(b.Y(this.status)?c(this):f())};a.onload=f;a.onerror=c;return e.promise}return function(b){var d=document.createElement("script"),f="https:"===document.location.protocol;d.async="async";d.type="text/javascript";d.src=(f?"https:":"http:")+b;(document.head||
document.querySelector("head")).appendChild(d);return a(d,b)}}])})(y);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(e){function d(){var a=[],b=[],d=[],f=[],c=[];this.I=function(a){return void 0!==this[a]};this.D=function(){return 0!==a.length&&this.adUnit?!0:!1};this.l=function(){console.assert(this.D());return Object.freeze({sizes:a,G:b,ca:d,W:f,H:this.adUnit,B:this.I("forceSafeFrame"),m:this.safeFrameConfig,J:this.clickUrl,refresh:this.refresh,scripts:c,w:this.I("collapseIfEmpty")})};this.addSize=function(b){a.push(b)};this.O=function(a){b.push(a)};this.R=function(a){d.push(a)};this.N=function(a){f.push(a)};
this.P=function(a){c.push(a)}}function b(a,b,d,f,c){function e(a){if(0!==g.G.length){var b=googletag.sizeMapping();g.G.forEach(function(a){b.addSize(a.T,a.M)});a.defineSizeMapping(b.build())}}d=c.get("dfp");var p=c.get("dfpIDGenerator"),r=c.get("dfpRefresh"),u=c.get("responsiveResize"),g=f.l(),v=b;b=b[0];p(b);d.then(function(){var c=googletag.defineSlot(g.H,g.sizes,b.id);void 0!==g.B&&c.setForceSafeFrame(!0);g.J&&c.setClickUrl(g.J);g.w&&c.setCollapseEmptyDiv(!0,!0);g.m&&c.setSafeFrameConfig(JSON.parse(g.m));
e(c);g.ca.forEach(function(a){c.setTargeting(a.key,a.values)});g.W.forEach(function(a){c.setCategoryExclusion(a)});g.scripts.forEach(function(a){a(c)});c.addService(googletag.pubads());googletag.display(b.id);r(c,g.refresh).then(function(){0<g.G.length&&u(v)});a.$on("$destroy",function(){console.assert(googletag.destroySlots([c]))})})}e.directive("dfpAd",["$injector",function(a){return{restrict:"AE",controller:d,controllerAs:"controller",bindToController:!0,link:function(d){for(var e=[],f=0;f<arguments.length;++f)e[f-
0]=arguments[f];b.apply(null,e.slice(0,4).concat(a))},scope:{adUnit:"@",clickUrl:"@",forceSafeFrame:"@",safeFrameConfig:"@",refresh:"@",collapseIfEmpty:"@"}}}])})(y);(function(e){function d(b,a){var d=1E13*String(Math.random()),e="";b.H&&(e="dc_iu="+b.adUnit);var f="";b.u&&(f="ppid="+b.ppid);var c=document.createElement("img");c.src="https://pubads.g.doubleclick.net/activity;ord=";c.src+=d+";dc_seg="+b.segmentId+";"+e+f;c.width=1;c.height=1;c.border=0;c.style.visibility="hidden";a.append(c)}e.directive("dfpAudiencePixel",[function(){return{restrict:"E",link:d,scope:{adUnit:"@",segmentId:"@",ppid:"@"}}}])})(y);(function(e){function d(b,a,d,e){e.N(a.html())}e.directive("dfpExclusion",[function(){return{restrict:"E",require:"^^dfpAd",link:d}}])})(y);(function(e){e.factory("dfpIDGenerator",[function(){function d(a){if(a&&a.id&&!(a.id in b))return a.id;var d=null;do d="gpt-ad-"+Math.random().toString().slice(2);while(d in b);b[d]=!0;a&&(a.id=d);return d}var b={};d.a=function(a){return a in b};d.i=function(a){return!d.a(a)};return d}])})(y);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(e){function d(){}x(d);d.a=Error.captureStackTrace;e.provider("dfpRefresh",[function(){var b=this;b.b=null;b.f=null;b.F=!0;b.c=null;b.priority={refresh:1,interval:1,barrier:1};b.$get=["$rootScope","$interval","$q","parseDuration",function(a,e,k,f){function c(a,b,d){var e=k.defer();a={L:a,V:e};b&&C(a,b);b&&d||(c.K()?B(a):r([a]));return e.promise}function w(a){if("number"!==typeof a)throw new d;}function p(){for(var a=Object.keys(h).map(function(a){return h[a]}).filter(c.Z),d=a.map(function(a){return b.priority[a]}),
e=d.reduce(function(a,b){return Math.max(a,b)}),f=0;f<a.length;++f)if(d[f]===e)switch(a[f]){case h.s:u();break;case h.o:v();break;case h.h:console.assert(c.i());m.j=!0;break;default:console.assert(!1)}else switch(a[f]){case h.s:g();break;case h.o:z();break;case h.h:m.j=!1;break;default:console.assert(!1)}}function r(a){console.assert(void 0===a||null!==a);void 0===a?googletag.cmd.push(function(){googletag.pubads().refresh()}):0!==a.length&&(a=a.filter(function(a){return null!==a}),googletag.cmd.push(function(){googletag.pubads().refresh(a.map(function(a){return a.L}));
a.forEach(function(a){return a.V.resolve()})}))}function u(){console.assert(c.A());var a=e(function(){A();r()},b.c);q.refresh=a;m.refresh=!0}function g(){m.refresh&&(e.cancel(q.refresh),q.refresh=null,m.refresh=!1)}function v(){console.assert(c.v());var a=e(function(){r(t);A()},b.b);q.buffer=a;m.interval=!0}function z(){m.interval&&(e.cancel(q.buffer),q.buffer=null,m.interval=!1)}function A(){if(m.j)for(var a=0;a<t.length;++a)t[a]=null;else t=[]}function C(a,b){b=f(b);var d=e(function(){c.K()?B(a):
r([a])},b);q[a.L]=d}function B(a){t.push(a);m[h.h]&&t.length===b.f&&(r(t),t=[],b.F&&c.X())}var h=Object.freeze({s:"refresh",o:"interval",h:"barrier"});c.Options=Object.freeze({REFRESH:h.s,INTERVAL:h.o,BARRIER:h.h});var t=[],q={refresh:null,buffer:null},m=Object.seal({refresh:null!==b.c,interval:null!==b.b,j:null!==b.f});c.ua=function(a){if(!c.$(a))throw new d;e.cancel(q[a]);delete q[a];return c};c.$=function(a){return a in q};c.ma=function(a){console.assert(null!==a&&0<a);b.b=f(a);p();return c};c.va=
function(){if(!c.v())return console.warn("clearBufferInterval had no effect because no interval was set."),c;z();b.b=null;p();return c};c.v=function(){return null!==b.b};c.ta=function(){return m.interval};c.fa=function(){return b.b};c.la=function(a,d){b.f=a;b.F=void 0===d?!0:d;p();return c};c.X=function(){c.i()?(b.f=null,p()):console.warn("clearBufferBarrier had not effect because no barrier was set.")};c.ea=function(){return b.f};c.i=function(){return null!==b.f};c.ra=function(){return m.j};c.sa=
function(){return b.F};c.oa=function(a){console.assert(null!==a&&0<a);b.c=f(a);u();p();return c};c.A=function(){return null!==b.c};c.ja=function(){return m.refresh};c.wa=function(){c.A()||console.warn("clearRefreshInterval had no effect because no refresh interval was set.");g();p();return c};c.ha=function(){return b.c};c.K=function(){return m.j||m.interval};c.Z=function(a){switch(a){case h.s:return c.A();case h.o:return c.v();case h.h:return c.i();default:throw new d;}};c.C=function(a,c){if(!(a in
h))throw new d;w(c);b.priority[a]=c};c.a=function(a){if(!(a in h))throw new d;return b.priority[a]};c.pa=function(a){w(a);c.C("refresh",a)};c.ia=function(){return c.a("refresh")};c.ka=function(a){w(a);c.C("barrier",a)};c.da=function(){return c.a("barrier")};c.na=function(a){w(a);c.C("interval",a)};c.ga=function(){return c.a("interval")};a.$on("$destroy",function(){q.forEach(function(a){e.cancel(a)})});b.c&&(b.c=f(b.c));b.b&&(b.b=f(b.b));p();return c}]}])})(y);(function(e){function d(){function a(){return b.some(function(a){return"number"!==typeof a})?!1:0<d.length}var b=Object.seal([this.browserWidth,this.browserHeight||0]),d=[];this.addSize=function(a){d.push(a)};this.l=function(){console.assert(a());return Object.freeze({T:b,M:d})}}function b(a,b,d,e){a=a.controller.l();e.O(a)}d.a=["$scope"];e.directive("dfpResponsive",[function(){return{restrict:"E",require:"^^dfpAd",controller:d,controllerAs:"controller",bindToController:!0,link:b,scope:{browserWidth:"=",
browserHeight:"="}}}])})(y);(function(e){function d(b,a,d,e,f){a=f.get("dfpFormat")("(function(scope, {0}) { {1} })",b.ba||"slot",a.html().trim());e.P(eval(a).bind(null,b.scope))}e.directive("dfpScript",["$injector",function(b){return{restrict:"E",require:"^^dfpAd",scope:{ba:"@",scope:"="},link:function(a){for(var e=[],k=0;k<arguments.length;++k)e[k-0]=arguments[k];d.apply(null,e.concat(b))}}}])})(y);(function(e){function d(b,a,d,e){e=e[1]||e[0];console.assert(e);b.width&&b.height?e.addSize([b.width,b.height]):e.addSize(a[0].innerHTML)}e.directive("dfpSize",[function(){return{restrict:"E",require:["?^^dfpAd","?^^dfpResponsive"],scope:{width:"=",height:"="},link:d}}])})(y);(function(e){function d(){var a=this.value?[this.value]:[];this.D=function(){return void 0===this.key||0===a.length?!1:!0};this.l=function(){console.assert(this.D());return Object.freeze({key:this.key,values:a})};this.S=function(b){a.push(b)}}function b(a,b,d,e){console.assert(void 0!==e);a=a.controller.l();e.R(a)}e.directive("dfpTargeting",[function(){return{restrict:"E",require:"^^dfpAd",controller:d,controllerAs:"controller",bindToController:!0,scope:{key:"@",value:"@"},link:b}}])})(y);(function(e){function d(b,a,d,e){e.S(a.html())}e.directive("dfpValue",[function(){return{restrict:"E",require:"^^dfpTargeting",link:d}}])})(y);(function(e){function d(b,a,d,e){d=e.get("dfpIDGenerator");a=a[0];console.assert("VIDEO"===a.tagName);d(a,!0);d=videojs(a.id);d.ima({id:a.id,qa:b.adTag});d.ima.requestAds();d.ima.initializeAdDisplayContainer()}e.directive("dfpVideo",["$injector",function(b){return{restrict:"A",scope:{adTag:"@"},link:function(a){for(var e=[],k=0;k<arguments.length;++k)e[k-0]=arguments[k];d.apply(null,e.concat(b))}}}]);return e})(angular.module("angularDfp"));googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(e){function d(){}x(d);d.a=Error.captureStackTrace;e.constant("GPT_LIBRARY_URL","//www.googletagservices.com/tag/js/gpt.js");e.provider("dfp",["GPT_LIBRARY_URL",function(b){var a=this;a.enableVideoAds=!0;a.w=!0;a.U=!1;a.location=null;a.u=null;a.g=null;a.B=!1;a.m=null;a.aa=!0;var e=!1;this.$get=["scriptInjector",function(k){function f(){var b=googletag.pubads();a.enableVideoAds&&b.enableVideoAds();a.w&&b.collapseEmptyDivs();b.disableInitialLoad();b.setForceSafeFrame(a.B);b.setCentering(a.U);
if(a.location)if("string"===typeof a.location)b.setLocation(a.location);else{if(!Array.isArray(a.location))throw new d;b.setLocation.apply(b,a.location)}if(a.u){if("string"!==typeof a.u)throw new d;b.setPublisherProvidedId(a.u)}if(a.g){if("object"!==typeof a.g)throw new d;for(var c in a.g)a.g.hasOwnProperty(c)&&b.setTargeting(c,a.g[c])}if(a.m){if("object"!==typeof a.g)throw new d;b.setSafeFrameConfig(a.m)}googletag.enableServices()}function c(){googletag.cmd.push(f);a.aa&&k(b).then(function(){e=!0})}
c.i=function(){return e};c.then=function(a){googletag.cmd.push(a)};return c}]}])})(y);
