/*
 Apache
 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function w(d){var e=Error;function b(){}b.prototype=e.prototype;d.prototype=new b;d.prototype.constructor=d;for(var a in e)if(l.Object.defineProperties){var n=l.Object.getOwnPropertyDescriptor(e,a);void 0!==n&&l.Object.defineProperty(d,a,n)}else d[a]=e[a]}var googletag=googletag||{};googletag.cmd=googletag.cmd||[];var x=angular.module("angularDfp",[]);(function(d){d.factory("httpError",["$log",function(e){function b(a){e.error("Error ("+a.status+")")}b.Y=function(a){if("number"===typeof a)return!(200<=a&&300>a);console.assert("string"===typeof a);return"2"!==a[0]};return b}])})(x);(function(d){function e(){}w(e);e.a=Error.captureStackTrace;d.factory("parseDuration",function(){return function(b){if("number"===typeof b)return b;if("string"!==typeof b)throw new TypeError("'"+b+"' must be of number or string type");var a=b.match(/(\d+)(m?s|min|h)?/);if(!a)throw new e;b=parseInt(a[1],10);2!==a.length&&(a=a[2],console.assert(/^(m?s|min|h)$/g.test(a)),b="ms"===a?b:"s"===a?1E3*b:"min"===a?6E4*b:36E5*b);return b}})})(x);(function(d){d.factory("responsiveResize",["$interval","$timeout","$window","dfpRefresh",function(e,b,a){a=angular.element(a);return function(n,g,f){function c(){return n.find("div iframe")}function d(a){a=a||c();a.css("width",a.attr("width")+"px");a.css("height",a.attr("height")+"px")}function p(){b(function(){n.removeClass("hidden")},1E3)}function r(a){var b=c();["width","height"].some(function(c){return b.attr(c)!==a[c]})&&d(b)}function h(a){var c=e(function(){return r(a)},100);b(function(){return e.cancel(c)},
2500)}function v(){var a=c(),a=[a.css("width"),a.css("height")].map(function(a){return a?a.slice(0,-2):null});return{width:a[0],height:a[1]}}function y(){h(v());a.on("resize",function(){d()});p()}f=f||[320,780,1480];console.assert(Array.isArray(f));a.on("resize",function(){function b(a){console.assert(0<=c&&c<f.length);console.assert(-1===a||1===a);c+=a;n.addClass("hidden");console.assert(0<=c&&c<f.length)}var c=function(){for(var c=a.innerWidth,b=f.length-1,n=0;n<b;++n)if(c<f[n+1])return n;return b}();
y();return function(){c+1>=f.length||a.innerWidth<f[c+1]?0>c-1||a.innerWidth>=f[c]||b(-1):b(1)}}())}}])})(x);(function(d){d.factory("scriptInjector",["$q","httpError",function(e,b){function a(a,g){function f(){d.resolve()}function c(a){a=a||{status:400};b(a,'loading script "{0}".',g);d.reject(a)}var d=e.defer();a.onreadystatechange=function(){4===this.readyState&&(b.Y(this.status)?c(this):f())};a.onload=f;a.onerror=c;return d.promise}return function(b){var g=document.createElement("script"),e="https:"===document.location.protocol;g.async="async";g.type="text/javascript";g.src=(e?"https:":"http:")+b;(document.head||
document.querySelector("head")).appendChild(g);return a(g,b)}}])})(x);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(d){function e(){var a=[],b=[],e=[],d=[],c=[];this.F=function(){return 0!==a.length&&this.adUnit?!0:!1};this.m=function(){console.assert(this.F());return Object.freeze({sizes:a,H:b,da:e,W:d,u:this.adUnit,C:this.forceSafeFrame,s:this.safeFrameConfig,J:this.clickUrl,refresh:this.refresh,scripts:c,A:this.collapseIfEmpty})};this.addSize=function(b){a.push(b)};this.O=function(a){b.push(a)};this.R=function(a){e.push(a)};this.N=function(a){d.push(a)};this.P=function(a){c.push(a)}}function b(a,b,
e,d,c){function u(a){if(0!==h.H.length){var b=googletag.sizeMapping();h.H.forEach(function(a){b.addSize(a.T,a.L)});a.defineSizeMapping(b.build())}}a=c.get("dfp");e=c.get("dfpIDGenerator");var p=c.get("dfpRefresh"),r=c.get("responsiveResize"),h=d.m(),v=b;b=b[0];e(b);a.then(function(){var a=googletag.defineSlot(h.u,h.sizes,b.id);void 0!==h.C&&a.setForceSafeFrame(!0);h.J&&a.setClickUrl(h.J);void 0!==h.A&&a.setCollapseEmptyDiv(!0,!0);void 0!==h.s&&a.setSafeFrameConfig(JSON.parse(h.s));u(a);h.da.forEach(function(b){a.setTargeting(b.key,
b.values)});h.W.forEach(function(b){a.setCategoryExclusion(b)});h.scripts.forEach(function(b){b(a)});a.addService(googletag.pubads());googletag.display(b.id);p(a,h.refresh).then(function(){0<h.H.length&&r(v)})})}d.directive("dfpAd",["$injector",function(a){return{restrict:"AE",controller:e,controllerAs:"controller",bindToController:!0,link:function(e){for(var d=[],f=0;f<arguments.length;++f)d[f-0]=arguments[f];b.apply(null,d.slice(0,4).concat(a))},scope:{adUnit:"@",clickUrl:"@",forceSafeFrame:"@",
safeFrameConfig:"@",refresh:"@",collapseIfEmpty:"@"}}}])})(x);(function(d){function e(b,a){var e=1E13*String(Math.random()),d="";b.u&&(d="dc_iu="+b.u);var f="";b.h&&(f="ppid="+b.h);var c=document.createElement("img");c.src="https://pubads.g.doubleclick.net/activity;ord=";c.src+=e+";dc_seg="+b.ba+";"+d+f;c.width=1;c.height=1;c.border=0;c.style.visibility="hidden";a.append(c)}d.directive("dfpAudiencePixel",[function(){return{restrict:"E",scope:{u:"@",ba:"@",h:"@"},link:e}}])})(x);(function(d){function e(b,a,e,d){d.N(a.html())}d.directive("dfpExclusion",[function(){return{restrict:"E",require:"^^dfpAd",link:e}}])})(x);(function(d){d.factory("dfpIDGenerator",[function(){function e(a){if(a&&a.id&&!(a.id in b))return a.id;var e=null;do e="gpt-ad-"+Math.random().toString().slice(2);while(e in b);b[e]=!0;a&&(a.id=e);return e}var b={};e.a=function(a){return a in b};e.l=function(a){return!e.a(a)};return e}])})(x);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(d){function e(){}w(e);e.a=Error.captureStackTrace;d.provider("dfpRefresh",[function(){var b=this;b.f=1E3;b.c=null;b.G=!0;b.o=36E5;b.priority={j:1,i:1,b:1};b.$get=["$rootScope","$interval","$q","parseDuration",function(a,d,g,f){function c(a,b,e){var d=g.defer();a={I:a,V:d};b&&C(a,b);b&&e||(c.K()?B(a):r([a]));return d.promise}function u(a){if("number"!==typeof a)throw new e;}function p(){for(var a=Object.keys(k).map(function(a){return k[a]}).filter(c.Z),e=a.map(function(a){return b.priority[a]}),
d=e.reduce(function(a,b){return Math.max(a,b)}),g=0;g<a.length;++g)if(e[g]===d)switch(a[g]){case k.j:h();break;case k.i:y();break;case k.b:console.assert(c.l());m.v=!0;break;default:console.assert(!1)}else switch(a[g]){case k.j:v();break;case k.i:z();break;case k.b:m.v=!1;break;default:console.assert(!1)}}function r(a){console.assert(void 0===a||null!==a);void 0===a?googletag.pubads().refresh():0!==a.length&&(a=a.filter(function(a){return null!==a.I}),googletag.cmd.push(function(){googletag.pubads().refresh(a.map(function(a){return a.I}));
a.forEach(function(a){return a.V.resolve()})}))}function h(){console.assert(c.B());var a=d(function(){A();r()},b.o);q.refresh=a;m.refresh=!0}function v(){m.refresh&&(d.cancel(q.refresh),q.refresh=null,m.refresh=!1)}function y(){console.assert(c.w());var a=d(function(){r(t);A()},b.f);q.buffer=a;m.interval=!0}function z(){m.interval&&(d.cancel(q.buffer),q.buffer=null,m.interval=!1)}function A(){for(var a=0;a<t.length;++a)t[a]=null}function C(a,b){b=f(b);var e=d(function(){c.K()?B(a):r([a])},b);q[a.I]=
e}function B(a){t.push(a);m[k.b]&&t.length===b.c&&(r(t),t=[],b.G&&c.X())}var k=Object.freeze({j:"refresh",i:"interval",b:"barrier"});c.Options=Object.freeze({REFRESH:k.j,INTERVAL:k.i,BARRIER:k.b});var t=[],q={refresh:null,buffer:null},m=Object.seal({refresh:null!==b.o,interval:null!==b.f,v:null!==b.c});c.va=function(a){if(!c.$(a))throw new e;d.cancel(q[a]);delete q[a];return c};c.$=function(a){return a in q};c.na=function(a){b.f=f(a);p();return c};c.wa=function(){if(!c.w())return console.warn("clearBufferInterval had no effect because no interval was set."),
c;z();b.f=null;p();return c};c.w=function(){return null!==b.f};c.ua=function(){return m.interval};c.ga=function(){return b.f};c.ma=function(a,e){b.c=a;b.G=void 0===e?!0:e;p();return c};c.X=function(){c.l()?(b.c=null,p()):console.warn("clearBufferBarrier had not effect because no barrier was set.")};c.fa=function(){return b.c};c.l=function(){return null!==b.c};c.sa=function(){return m.v};c.ta=function(){return b.G};c.pa=function(a){b.o=f(a);h();p();return c};c.B=function(){return null!==b.o};c.ka=
function(){return m.refresh};c.xa=function(){c.B()||console.warn("clearRefreshInterval had no effect because no refresh interval was set.");v();p();return c};c.ia=function(){return b.o};c.K=function(){return m.buffer||m.interval};c.Z=function(a){switch(a){case k.j:return c.B();case k.i:return c.w();case k.b:return c.l();default:throw new e;}};c.D=function(a,c){if(!(a in k))throw new e;u(c);b.priority[a]=c};c.a=function(a){if(!(a in k))throw new e;return b.priority[a]};c.qa=function(a){u(a);c.D("refresh",
a)};c.ja=function(){return c.a("refresh")};c.la=function(a){u(a);c.D("barrier",a)};c.ea=function(){return c.a("barrier")};c.oa=function(a){u(a);c.D("interval",a)};c.ha=function(){return c.a("interval")};a.$on("$destroy",function(){q.forEach(function(a){d.cancel(a)})});p();return c}]}])})(x);(function(d){function e(){function a(){return b.some(function(a){return"number"!==typeof a})?!1:0<e.length}console.log(this);var b=Object.seal([this.browserWidth,this.browserHeight||0]),e=[];this.addSize=function(a){e.push(a)};this.m=function(){console.assert(a());return Object.freeze({T:b,L:e})}}function b(a,b,e,d){a=a.controller.m();d.O(a)}e.a=["$scope"];d.directive("dfpResponsive",[function(){return{restrict:"E",require:"^^dfpAd",controller:e,controllerAs:"controller",bindToController:!0,link:b,
scope:{browserWidth:"=",browserHeight:"="}}}])})(x);(function(d){function e(b,a,e,d,f){a=f.get("dfpFormat")("(function(scope, {0}) { {1} })",b.ca||"slot",a.html().trim());d.P(eval(a).bind(null,b.scope))}d.directive("dfpScript",["$injector",function(b){return{restrict:"E",require:"^^dfpAd",scope:{ca:"@",scope:"="},link:function(a){for(var d=[],g=0;g<arguments.length;++g)d[g-0]=arguments[g];e.apply(null,d.concat(b))}}}])})(x);(function(d){function e(b,a,e,d){d=d[1]||d[0];console.assert(d);b.width&&b.height?d.addSize([b.width,b.height]):d.addSize(a[0].innerHTML)}d.directive("dfpSize",[function(){return{restrict:"E",require:["?^^dfpAd","?^^dfpResponsive"],scope:{width:"=",height:"="},link:e}}])})(x);(function(d){function e(){var a=this.value?[this.value]:[];this.F=function(){return void 0===this.key||0===a.length?!1:!0};this.m=function(){console.assert(this.F());return Object.freeze({key:this.key,values:a})};this.S=function(b){a.push(b)}}function b(a,b,e,d){console.assert(void 0!==d);a=a.controller.m();d.R(a)}d.directive("dfpTargeting",[function(){return{restrict:"E",require:"^^dfpAd",controller:e,controllerAs:"controller",bindToController:!0,scope:{key:"@",value:"@"},link:b}}])})(x);(function(d){function e(b,a,e,d){d.S(a.html())}d.directive("dfpValue",[function(){return{restrict:"E",require:"^^dfpTargeting",link:e}}])})(x);(function(d){function e(b,a,d,e){d=e.get("dfpIDGenerator");a=a[0];console.assert("VIDEO"===a.tagName);d(a,!0);d=videojs(a.id);d.ima({id:a.id,ra:b.M});d.ima.requestAds();d.ima.initializeAdDisplayContainer()}d.directive("dfpVideo",["$injector",function(b){return{restrict:"A",scope:{M:"@"},link:function(a){for(var d=[],g=0;g<arguments.length;++g)d[g-0]=arguments[g];e.apply(null,d.concat(b))}}}]);return d})(angular.module("angularDfp"));googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(d){function e(){}w(e);e.a=Error.captureStackTrace;d.constant("GPT_LIBRARY_URL","//www.googletagservices.com/tag/js/gpt.js");d.provider("dfp",["GPT_LIBRARY_URL",function(b){var a=this;a.enableVideoAds=!0;a.A=!0;a.U=!1;a.location=null;a.h=null;a.g=null;a.C=!1;a.s=null;a.aa=!0;var d=!1;this.$get=["scriptInjector",function(g){function f(){var b=googletag.pubads();a.enableVideoAds&&b.enableVideoAds();a.A&&b.collapseEmptyDivs();b.disableInitialLoad();b.setForceSafeFrame(a.C);b.setCentering(a.U);
if(a.location)if("string"===typeof a.location)b.setLocation(a.location);else{if(!Array.isArray(a.location))throw new e;b.setLocation.apply(b,a.location)}if(a.h){if("string"!==typeof a.h)throw new e;b.setPublisherProvidedId(a.h)}if(a.g){if("object"!==typeof a.g)throw new e;for(var c in a.g)a.g.hasOwnProperty(c)&&b.setTargeting(c,a.g[c])}if(a.s){if("object"!==typeof a.g)throw new e;b.setSafeFrameConfig(a.s)}googletag.enableServices()}function c(){googletag.cmd.push(f);a.aa&&g(b).then(function(){d=!0})}
c.l=function(){return d};c.then=function(a){googletag.cmd.push(a)};return c}]}])})(x);
