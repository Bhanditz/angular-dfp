/*
 Apache
 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function x(d){var e=Error;function b(){}b.prototype=e.prototype;d.prototype=new b;d.prototype.constructor=d;for(var a in e)if(l.Object.defineProperties){var n=l.Object.getOwnPropertyDescriptor(e,a);void 0!==n&&l.Object.defineProperty(d,a,n)}else d[a]=e[a]}var googletag=googletag||{};googletag.cmd=googletag.cmd||[];var y=angular.module("angularDfp",[]);(function(d){d.factory("httpError",["$log",function(e){function b(a){e.error("Error ("+a.status+")")}b.Y=function(a){if("number"===typeof a)return!(200<=a&&300>a);console.assert("string"===typeof a);return"2"!==a[0]};return b}])})(y);(function(d){function e(){}x(e);e.a=Error.captureStackTrace;d.factory("parseDuration",function(){return function(b){if("number"===typeof b)return b;if("string"!==typeof b)throw new TypeError("'"+b+"' must be of number or string type");var a=b.match(/(\d+)(m?s|min|h)?/);if(!a)throw new e;b=parseInt(a[1],10);2!==a.length&&(a=a[2],console.assert(/^(m?s|min|h)$/g.test(a)),b="ms"===a?b:"s"===a?1E3*b:"min"===a?6E4*b:36E5*b);return b}})})(y);(function(d){d.factory("responsiveResize",["$interval","$timeout","$window","dfpRefresh",function(e,b,a){a=angular.element(a);return function(n,g,f){function c(){return n.find("div iframe")}function d(a){a=a||c();a.css("width",a.attr("width")+"px");a.css("height",a.attr("height")+"px")}function p(){b(function(){n.removeClass("hidden")},1E3)}function r(a){var b=c();["width","height"].some(function(c){return b.attr(c)!==a[c]})&&d(b)}function v(a){var c=e(function(){return r(a)},100);b(function(){return e.cancel(c)},
2500)}function h(){var a=c(),a=[a.css("width"),a.css("height")].map(function(a){return a?a.slice(0,-2):null});return{width:a[0],height:a[1]}}function w(){v(h());a.on("resize",function(){d()});p()}f=f||[320,780,1480];console.assert(Array.isArray(f));a.on("resize",function(){function b(a){console.assert(0<=c&&c<f.length);console.assert(-1===a||1===a);c+=a;n.addClass("hidden");console.assert(0<=c&&c<f.length)}var c=function(){for(var b=a.innerWidth,c=f.length-1,n=0;n<c;++n)if(b<f[n+1])return n;return c}();
w();return function(){c+1>=f.length||a.innerWidth<f[c+1]?0>c-1||a.innerWidth>=f[c]||b(-1):b(1)}}())}}])})(y);(function(d){d.factory("scriptInjector",["$q","httpError",function(e,b){function a(a,g){function f(){d.resolve()}function c(a){a=a||{status:400};b(a,'loading script "{0}".',g);d.reject(a)}var d=e.defer();a.onreadystatechange=function(){4===this.readyState&&(b.Y(this.status)?c(this):f())};a.onload=f;a.onerror=c;return d.promise}return function(b){var g=document.createElement("script"),e="https:"===document.location.protocol;g.async="async";g.type="text/javascript";g.src=(e?"https:":"http:")+b;(document.head||
document.querySelector("head")).appendChild(g);return a(g,b)}}])})(y);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(d){function e(){var a=[],b=[],e=[],d=[],c=[];this.I=function(a){return void 0!==this[a]};this.D=function(){return 0!==a.length&&this.adUnit?!0:!1};this.l=function(){console.assert(this.D());return Object.freeze({sizes:a,G:b,ca:e,W:d,H:this.adUnit,B:this.I("forceSafeFrame"),m:this.safeFrameConfig,J:this.clickUrl,refresh:this.refresh,scripts:c,w:this.I("collapseIfEmpty")})};this.addSize=function(b){a.push(b)};this.O=function(a){b.push(a)};this.R=function(a){e.push(a)};this.N=function(a){d.push(a)};
this.P=function(a){c.push(a)}}function b(a,b,e,d,c){function u(a){if(0!==h.G.length){var b=googletag.sizeMapping();h.G.forEach(function(a){b.addSize(a.T,a.M)});a.defineSizeMapping(b.build())}}e=c.get("dfp");var p=c.get("dfpIDGenerator"),r=c.get("dfpRefresh"),v=c.get("responsiveResize"),h=d.l(),w=b;b=b[0];p(b);e.then(function(){var c=googletag.defineSlot(h.H,h.sizes,b.id);void 0!==h.B&&c.setForceSafeFrame(!0);h.J&&c.setClickUrl(h.J);h.w&&c.setCollapseEmptyDiv(!0,!0);h.m&&c.setSafeFrameConfig(JSON.parse(h.m));
u(c);h.ca.forEach(function(a){c.setTargeting(a.key,a.values)});h.W.forEach(function(a){c.setCategoryExclusion(a)});h.scripts.forEach(function(a){a(c)});c.addService(googletag.pubads());googletag.display(b.id);r(c,h.refresh).then(function(){0<h.G.length&&v(w)});a.$on("$destroy",function(){console.assert(googletag.destroySlots([c]))})})}d.directive("dfpAd",["$injector",function(a){return{restrict:"AE",controller:e,controllerAs:"controller",bindToController:!0,link:function(e){for(var d=[],f=0;f<arguments.length;++f)d[f-
0]=arguments[f];b.apply(null,d.slice(0,4).concat(a))},scope:{adUnit:"@",clickUrl:"@",forceSafeFrame:"@",safeFrameConfig:"@",refresh:"@",collapseIfEmpty:"@"}}}])})(y);(function(d){function e(b,a){var e=1E13*String(Math.random()),d="";b.H&&(d="dc_iu="+b.adUnit);var f="";b.u&&(f="ppid="+b.ppid);var c=document.createElement("img");c.src="https://pubads.g.doubleclick.net/activity;ord=";c.src+=e+";dc_seg="+b.segmentId+";"+d+f;c.width=1;c.height=1;c.border=0;c.style.visibility="hidden";a.append(c)}d.directive("dfpAudiencePixel",[function(){return{restrict:"E",link:e,scope:{adUnit:"@",segmentId:"@",ppid:"@"}}}])})(y);(function(d){function e(b,a,e,d){d.N(a.html())}d.directive("dfpExclusion",[function(){return{restrict:"E",require:"^^dfpAd",link:e}}])})(y);(function(d){d.factory("dfpIDGenerator",[function(){function e(a){if(a&&a.id&&!(a.id in b))return a.id;var e=null;do e="gpt-ad-"+Math.random().toString().slice(2);while(e in b);b[e]=!0;a&&(a.id=e);return e}var b={};e.a=function(a){return a in b};e.i=function(a){return!e.a(a)};return e}])})(y);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(d){function e(){}x(e);e.a=Error.captureStackTrace;d.provider("dfpRefresh",[function(){var b=this;b.b=null;b.f=null;b.F=!0;b.c=null;b.priority={refresh:1,interval:1,barrier:1};b.$get=["$rootScope","$interval","$q","parseDuration",function(a,d,g,f){function c(a,b,e){var d=g.defer();a={L:a,V:d};b&&C(a,b);b&&e||(c.K()?B(a):r([a]));return d.promise}function u(a){if("number"!==typeof a)throw new e;}function p(){for(var a=Object.keys(k).map(function(a){return k[a]}).filter(c.Z),e=a.map(function(a){return b.priority[a]}),
d=e.reduce(function(a,b){return Math.max(a,b)}),g=0;g<a.length;++g)if(e[g]===d)switch(a[g]){case k.s:v();break;case k.o:w();break;case k.h:console.assert(c.i());m.j=!0;break;default:console.assert(!1)}else switch(a[g]){case k.s:h();break;case k.o:z();break;case k.h:m.j=!1;break;default:console.assert(!1)}}function r(a){console.assert(void 0===a||null!==a);void 0===a?googletag.cmd.push(function(){googletag.pubads().refresh()}):0!==a.length&&(a=a.filter(function(a){return null!==a}),googletag.cmd.push(function(){googletag.pubads().refresh(a.map(function(a){return a.L}));
a.forEach(function(a){return a.V.resolve()})}))}function v(){console.assert(c.A());var a=d(function(){A();r()},b.c);q.refresh=a;m.refresh=!0}function h(){m.refresh&&(d.cancel(q.refresh),q.refresh=null,m.refresh=!1)}function w(){console.assert(c.v());var a=d(function(){r(t);A()},b.b);q.buffer=a;m.interval=!0}function z(){m.interval&&(d.cancel(q.buffer),q.buffer=null,m.interval=!1)}function A(){if(m.j)for(var a=0;a<t.length;++a)t[a]=null;else t=[]}function C(a,b){b=f(b);var e=d(function(){c.K()?B(a):
r([a])},b);q[a.L]=e}function B(a){t.push(a);m[k.h]&&t.length===b.f&&(r(t),t=[],b.F&&c.X())}var k=Object.freeze({s:"refresh",o:"interval",h:"barrier"});c.Options=Object.freeze({REFRESH:k.s,INTERVAL:k.o,BARRIER:k.h});var t=[],q={refresh:null,buffer:null},m=Object.seal({refresh:null!==b.c,interval:null!==b.b,j:null!==b.f});c.ua=function(a){if(!c.$(a))throw new e;d.cancel(q[a]);delete q[a];return c};c.$=function(a){return a in q};c.ma=function(a){b.b=f(a);p();return c};c.va=function(){if(!c.v())return console.warn("clearBufferInterval had no effect because no interval was set."),
c;z();b.b=null;p();return c};c.v=function(){return null!==b.b};c.ta=function(){return m.interval};c.fa=function(){return b.b};c.la=function(a,e){b.f=a;b.F=void 0===e?!0:e;p();return c};c.X=function(){c.i()?(b.f=null,p()):console.warn("clearBufferBarrier had not effect because no barrier was set.")};c.ea=function(){return b.f};c.i=function(){return null!==b.f};c.ra=function(){return m.j};c.sa=function(){return b.F};c.oa=function(a){b.c=f(a);v();p();return c};c.A=function(){return null!==b.c};c.ja=
function(){return m.refresh};c.wa=function(){c.A()||console.warn("clearRefreshInterval had no effect because no refresh interval was set.");h();p();return c};c.ha=function(){return b.c};c.K=function(){return m.j||m.interval};c.Z=function(a){switch(a){case k.s:return c.A();case k.o:return c.v();case k.h:return c.i();default:throw new e;}};c.C=function(a,c){if(!(a in k))throw new e;u(c);b.priority[a]=c};c.a=function(a){if(!(a in k))throw new e;return b.priority[a]};c.pa=function(a){u(a);c.C("refresh",
a)};c.ia=function(){return c.a("refresh")};c.ka=function(a){u(a);c.C("barrier",a)};c.da=function(){return c.a("barrier")};c.na=function(a){u(a);c.C("interval",a)};c.ga=function(){return c.a("interval")};a.$on("$destroy",function(){q.forEach(function(a){d.cancel(a)})});b.c&&(b.c=f(b.c));b.b&&(b.b=f(b.b));p();return c}]}])})(y);(function(d){function e(){function a(){return b.some(function(a){return"number"!==typeof a})?!1:0<e.length}var b=Object.seal([this.browserWidth,this.browserHeight||0]),e=[];this.addSize=function(a){e.push(a)};this.l=function(){console.assert(a());return Object.freeze({T:b,M:e})}}function b(a,b,e,d){a=a.controller.l();d.O(a)}e.a=["$scope"];d.directive("dfpResponsive",[function(){return{restrict:"E",require:"^^dfpAd",controller:e,controllerAs:"controller",bindToController:!0,link:b,scope:{browserWidth:"=",
browserHeight:"="}}}])})(y);(function(d){function e(b,a,e,d,f){a=f.get("dfpFormat")("(function(scope, {0}) { {1} })",b.ba||"slot",a.html().trim());d.P(eval(a).bind(null,b.scope))}d.directive("dfpScript",["$injector",function(b){return{restrict:"E",require:"^^dfpAd",scope:{ba:"@",scope:"="},link:function(a){for(var d=[],g=0;g<arguments.length;++g)d[g-0]=arguments[g];e.apply(null,d.concat(b))}}}])})(y);(function(d){function e(b,a,e,d){d=d[1]||d[0];console.assert(d);b.width&&b.height?d.addSize([b.width,b.height]):d.addSize(a[0].innerHTML)}d.directive("dfpSize",[function(){return{restrict:"E",require:["?^^dfpAd","?^^dfpResponsive"],scope:{width:"=",height:"="},link:e}}])})(y);(function(d){function e(){var a=this.value?[this.value]:[];this.D=function(){return void 0===this.key||0===a.length?!1:!0};this.l=function(){console.assert(this.D());return Object.freeze({key:this.key,values:a})};this.S=function(b){a.push(b)}}function b(a,b,e,d){console.assert(void 0!==d);a=a.controller.l();d.R(a)}d.directive("dfpTargeting",[function(){return{restrict:"E",require:"^^dfpAd",controller:e,controllerAs:"controller",bindToController:!0,scope:{key:"@",value:"@"},link:b}}])})(y);(function(d){function e(b,a,e,d){d.S(a.html())}d.directive("dfpValue",[function(){return{restrict:"E",require:"^^dfpTargeting",link:e}}])})(y);(function(d){function e(b,a,d,e){d=e.get("dfpIDGenerator");a=a[0];console.assert("VIDEO"===a.tagName);d(a,!0);d=videojs(a.id);d.ima({id:a.id,qa:b.adTag});d.ima.requestAds();d.ima.initializeAdDisplayContainer()}d.directive("dfpVideo",["$injector",function(b){return{restrict:"A",scope:{adTag:"@"},link:function(a){for(var d=[],g=0;g<arguments.length;++g)d[g-0]=arguments[g];e.apply(null,d.concat(b))}}}]);return d})(angular.module("angularDfp"));googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(d){function e(){}x(e);e.a=Error.captureStackTrace;d.constant("GPT_LIBRARY_URL","//www.googletagservices.com/tag/js/gpt.js");d.provider("dfp",["GPT_LIBRARY_URL",function(b){var a=this;a.enableVideoAds=!0;a.w=!0;a.U=!1;a.location=null;a.u=null;a.g=null;a.B=!1;a.m=null;a.aa=!0;var d=!1;this.$get=["scriptInjector",function(g){function f(){var b=googletag.pubads();a.enableVideoAds&&b.enableVideoAds();a.w&&b.collapseEmptyDivs();b.disableInitialLoad();b.setForceSafeFrame(a.B);b.setCentering(a.U);
if(a.location)if("string"===typeof a.location)b.setLocation(a.location);else{if(!Array.isArray(a.location))throw new e;b.setLocation.apply(b,a.location)}if(a.u){if("string"!==typeof a.u)throw new e;b.setPublisherProvidedId(a.u)}if(a.g){if("object"!==typeof a.g)throw new e;for(var c in a.g)a.g.hasOwnProperty(c)&&b.setTargeting(c,a.g[c])}if(a.m){if("object"!==typeof a.g)throw new e;b.setSafeFrameConfig(a.m)}googletag.enableServices()}function c(){googletag.cmd.push(f);a.aa&&g(b).then(function(){d=!0})}
c.i=function(){return d};c.then=function(a){googletag.cmd.push(a)};return c}]}])})(y);
