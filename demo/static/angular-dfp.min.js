/*
 Apache
 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function y(c){var d=Error;function b(){}b.prototype=d.prototype;c.prototype=new b;c.prototype.constructor=c;for(var a in d)if(l.Object.defineProperties){var g=l.Object.getOwnPropertyDescriptor(d,a);void 0!==g&&l.Object.defineProperty(c,a,g)}else c[a]=d[a]}var googletag=googletag||{};googletag.cmd=googletag.cmd||[];var z=angular.module("angularDfp",[]);(function(c){c.factory("httpError",["$log",function(d){function b(a){d.error("Error ("+a.status+")")}b.Y=function(a){if("number"===typeof a)return!(200<=a&&300>a);console.assert("string"===typeof a);return"2"!==a[0]};return b}])})(z);(function(c){function d(){}y(d);d.a=Error.captureStackTrace;c.factory("parseDuration",function(){return function(b){if("number"===typeof b)return b;if("string"!==typeof b)throw new TypeError("'"+b+"' must be of number or string type");var a=b.match(/(\d+)(m?s|min|h)?/);if(!a)throw new d;b=parseInt(a[1],10);2!==a.length&&(a=a[2],console.assert(/^(m?s|min|h)$/g.test(a)),b="ms"===a?b:"s"===a?1E3*b:"min"===a?6E4*b:36E5*b);return b}})})(z);(function(c){function d(b,a,g,k){g=angular.element(g);return function(d,e,h){function c(){return d.find("div iframe")}function q(a){a=a||c();a.css("width",a.attr("width")+"px");a.css("height",a.attr("height")+"px")}function f(){a(function(){d.removeClass("hidden")},1E3)}function v(a){var b=c();["width","height"].some(function(e){return b.attr(e)!==a[e]})&&q(b)}function x(e){var g=b(function(){return v(e)},100);a(function(){return b.cancel(g)},2500)}function A(){var a=c(),a=[a.css("width"),a.css("height")].map(function(a){return a?
a.slice(0,-2):null});return{width:a[0],height:a[1]}}function w(){x(A());g.on("resize",function(){q()});f()}h=h||[320,780,1480];console.assert(Array.isArray(h));g.on("resize",function(){function a(g){console.assert(0<=b&&b<h.length);console.assert(-1===g||1===g);b+=g;d.addClass("hidden");k(e).then(function(){w()});console.assert(0<=b&&b<h.length)}var b=function(){for(var a=g.innerWidth,b=h.length-1,e=0;e<b;++e)if(a<h[e+1])return e;return b}();w();return function(){b+1>=h.length||g.innerWidth<h[b+1]?
0>b-1||g.innerWidth>=h[b]||a(-1):a(1)}}())}}d.a=["$interval","$timeout","$window","dfpRefresh"];c.factory("responsiveResize",d)})(z);(function(c){c.factory("scriptInjector",["$q","httpError",function(d,b){function a(a,k){function c(){h.resolve()}function e(a){a=a||{status:400};b(a,'loading script "{0}".',k);h.reject(a)}var h=d.defer();a.onreadystatechange=function(){4===this.readyState&&(b.Y(this.status)?e(this):c())};a.onload=c;a.onerror=e;return h.promise}return function(b){var d=document.createElement("script"),c="https:"===document.location.protocol;d.async="async";d.type="text/javascript";d.src=(c?"https:":"http:")+b;(document.head||
document.querySelector("head")).appendChild(d);return a(d,b)}}])})(z);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(c){function d(){var a=[],b=[],d=[],c=[],e=[];this.G=function(){return 0!==a.length&&this.b?!0:!1};this.u=function(){console.assert(this.G());return Object.freeze({sizes:a,I:b,ea:d,W:c,b:this.b,s:this.s,c:this.c,A:this.A,refresh:this.refresh,scripts:e,o:this.o})};this.addSize=function(b){a.push(b)};this.O=function(a){b.push(a)};this.R=function(a){d.push(a)};this.N=function(a){c.push(a)};this.P=function(a){e.push(a)}}function b(a,b,d,c,e){function h(a){if(0!==f.I.length){var b=googletag.sizeMapping();
f.I.forEach(function(a){b.addSize(a.T,a.L)});a.defineSizeMapping(b.build())}}a=e.get("dfp");d=e.get("dfpIDGenerator");var u=e.get("dfpRefresh"),q=e.get("responsiveResize"),f=c.u(),v=b;b=b[0];d(b);a.then(function(){var a=googletag.defineSlot(f.b,f.sizes,b.id);void 0!==f.s&&a.setForceSafeFrame(!0);f.A&&a.setClickUrl(f.A);void 0!==f.o&&a.setCollapseEmptyDiv(!0,!0);void 0!==f.c&&a.setSafeFrameConfig(JSON.parse(f.c));h(a);f.ea.forEach(function(b){a.setTargeting(b.key,b.values)});f.W.forEach(function(b){a.setCategoryExclusion(b)});
f.scripts.forEach(function(b){b(a)});a.addService(googletag.pubads());googletag.display(b.id);u(a,f.refresh).then(function(){0<f.I.length&&q(v)})})}c.directive("dfpAd",["$injector",function(a){return{restrict:"AE",controller:d,controllerAs:"controller",bindToController:!0,link:function(d){for(var c=[],m=0;m<arguments.length;++m)c[m-0]=arguments[m];b.apply(null,c.slice(0,4).concat(a))},scope:{b:"@",A:"@",s:"@",c:"@",refresh:"@",o:"@"}}}])})(z);(function(c){function d(b,a){var d=1E13*String(Math.random()),c="";b.b&&(c="dc_iu="+b.b);var m="";b.j&&(m="ppid="+b.j);var e=document.createElement("img");e.src="https://pubads.g.doubleclick.net/activity;ord=";e.src+=d+";dc_seg="+b.ca+";"+c+m;e.width=1;e.height=1;e.border=0;e.style.visibility="hidden";a.append(e)}c.directive("dfpAudiencePixel",[function(){return{restrict:"E",scope:{b:"@",ca:"@",j:"@"},link:d}}])})(z);(function(c){function d(b,a,d,c){c.N(a.html())}c.directive("dfpExclusion",[function(){return{restrict:"E",require:"^^dfpAd",link:d}}])})(z);(function(c){c.factory("dfpIDGenerator",[function(){function d(a){if(a&&a.id&&!(a.id in b))return a.id;var d=null;do d="gpt-ad-"+Math.random().toString().slice(2);while(d in b);b[d]=!0;a&&(a.id=d);return d}var b={};d.a=function(a){return a in b};d.m=function(a){return!d.a(a)};return d}])})(z);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(c){function d(){}y(d);d.a=Error.captureStackTrace;c.provider("dfpRefresh",[function(){var b=this;b.h=1E3;b.g=null;b.H=!0;b.v=36E5;b.priority={w:1,l:1,f:1};b.$get=["$rootScope","$interval","$q","parseDuration",function(a,c,k,m){function e(a,b,d){var c=k.defer();a={J:a,V:c};b&&D(a,b);b&&d||(e.K()?C(a):f([a]));return c.promise}function h(a){if(!(a in n))throw new d;}function u(a){if("number"!==typeof a)throw new d;}function q(){for(var a=Object.keys(n).filter(e.Z),d=a.map(function(a){return b.priority[a]}),
c=d.reduce(function(a,b){return Math.max(a,b)}),g=0;g<a.length;++g)if(d[g]===c)switch(a[g]){case n.w:v();break;case n.l:A();break;case n.f:console.assert(e.m());p.B=!0;break;default:console.assert(!1)}else switch(a[g]){case n.w:x();break;case n.l:w();break;case n.f:p.B=!1;break;default:console.assert(!1)}}function f(a){console.assert(void 0===a||null!==a);void 0===a?googletag.pubads().refresh():0!==a.length&&(a=a.filter(function(a){return null!==a.J}),googletag.cmd.push(function(){googletag.pubads().refresh(a.map(function(a){return a.J}));
a.forEach(function(a){return a.V.resolve()})}))}function v(){console.assert(e.D());var a=c(function(){B();f()},b.v);r.refresh=a;p.refresh=!0}function x(){p.refresh&&(c.cancel(r.refresh),r.refresh=null,p.refresh=!1)}function A(){console.assert(e.C());var a=c(function(){f(t);B()},b.h);r.buffer=a;p.interval=!0}function w(){p.interval&&(c.cancel(r.buffer),r.buffer=null,p.interval=!1)}function B(){for(var a=0;a<t.length;++a)t[a]=null}function D(a,b){b=m(b);var d=c(function(){e.K()?C(a):f([a])},b);r[a.J]=
d}function C(a){t.push(a);p[n.f]&&t.length===b.g&&(f(t),t=[],b.H&&e.X())}var n=Object.freeze({w:"REFRESH",l:"INTERVAL",f:"BARRIER"});e.Options=n;var t=[],r={refresh:null,buffer:null},p=Object.seal({refresh:null!==b.v,interval:null!==b.h,B:null!==b.g});e.xa=function(a){if(!e.ba(a))throw new d;c.cancel(r[a]);delete r[a];return e};e.ba=function(a){return a in r};e.pa=function(a){b.h=m(a);q();return e};e.ya=function(){if(!e.C())return console.warn("clearBufferInterval had no effect because no interval was set."),
e;w();b.h=null;q();return e};e.C=function(){return null!==b.h};e.wa=function(){return p.interval};e.ia=function(){return b.h};e.oa=function(a,d){b.g=a;b.H=void 0===d?!0:d;q();return e};e.X=function(){e.m()?(b.g=null,q()):console.warn("clearBufferBarrier had not effect because no barrier was set.")};e.ha=function(){return b.g};e.m=function(){return null!==b.g};e.ua=function(){return p.B};e.va=function(){return b.H};e.ra=function(a){b.v=m(a);v();q();return e};e.D=function(){return null!==b.v};e.ma=
function(){return p.refresh};e.fa=function(){e.D()||console.warn("clearRefreshInterval had no effect because no refresh interval was set.");x();q();return e};e.ka=function(){return b.v};e.K=function(){return[n.f,n.l].some(e.$)};e.Z=function(a){switch(a){case n.w:return e.D();case n.l:return e.C();case n.f:return e.m();default:throw new d;}};e.$=function(a){h(a);return p[a]};e.F=function(a,e){h(a);u(e);b.priority[a]=e};e.a=function(a){h(a);return b.priority[a]};e.sa=function(a){u(a);e.F("refresh",
a)};e.la=function(){return e.a("refresh")};e.na=function(a){u(a);e.F("barrier",a)};e.ga=function(){return e.a("barrier")};e.qa=function(a){u(a);e.F("interval",a)};e.ja=function(){return e.a("interval")};a.$on("$destroy",function(){r.forEach(function(a){c.cancel(a)})});q();return e}]}])})(z);(function(c){function d(){function a(){console.log(this);return b.some(function(a){return"number"!==typeof a})?!1:0<d.length}var b=Object.seal([this.browserWidth,this.browserHeight||0]);console.log(b,this);var d=[];this.addSize=function(a){d.push(a)};this.u=function(){console.assert(a());return Object.freeze({T:b,L:d})}}function b(a,b,d,c){console.log(a);a=a.controller.u();c.O(a)}d.a=["$scope"];c.directive("dfpResponsive",[function(){return{restrict:"E",require:"^^dfpAd",controller:d,controllerAs:"controller",
bindToController:!0,link:b,scope:{browserWidth:"=",browserHeight:"="}}}])})(z);(function(c){function d(b,a,d,c,m){a=m.get("dfpFormat")("(function(scope, {0}) { {1} })",b.da||"slot",a.html().trim());c.P(eval(a).bind(null,b.scope))}c.directive("dfpScript",["$injector",function(b){return{restrict:"E",require:"^^dfpAd",scope:{da:"@",scope:"="},link:function(a){for(var c=[],k=0;k<arguments.length;++k)c[k-0]=arguments[k];d.apply(null,c.concat(b))}}}])})(z);(function(c){function d(b,a,d,c){c=c[1]||c[0];console.assert(c);b.width&&b.height?c.addSize([b.width,b.height]):c.addSize(a[0].innerHTML)}c.directive("dfpSize",[function(){return{restrict:"E",require:["?^^dfpAd","?^^dfpResponsive"],scope:{width:"=",height:"="},link:d}}])})(z);(function(c){function d(){var a=this.value?[this.value]:[];this.G=function(){return void 0===this.key||0===a.length?!1:!0};this.u=function(){console.assert(this.G());return Object.freeze({key:this.key,values:a})};this.S=function(b){a.push(b)}}function b(a,b,d,c){console.assert(void 0!==c);a=a.controller.u();c.R(a)}c.directive("dfpTargeting",[function(){return{restrict:"E",require:"^^dfpAd",controller:d,controllerAs:"controller",bindToController:!0,scope:{key:"@",value:"@"},link:b}}])})(z);(function(c){function d(b,a,d,c){c.S(a.html())}c.directive("dfpValue",[function(){return{restrict:"E",require:"^^dfpTargeting",link:d}}])})(z);(function(c){function d(b,a,d,c){d=c.get("dfpIDGenerator");a=a[0];console.assert("VIDEO"===a.tagName);d(a,!0);d=videojs(a.id);d.ima({id:a.id,ta:b.M});d.ima.requestAds();d.ima.initializeAdDisplayContainer()}c.directive("dfpVideo",["$injector",function(b){return{restrict:"A",scope:{M:"@"},link:function(a){for(var c=[],k=0;k<arguments.length;++k)c[k-0]=arguments[k];d.apply(null,c.concat(b))}}}]);return c})(angular.module("angularDfp"));googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(c){function d(){}y(d);d.a=Error.captureStackTrace;c.constant("GPT_LIBRARY_URL","//www.googletagservices.com/tag/js/gpt.js");c.provider("dfp",["GPT_LIBRARY_URL",function(b){var a=this;a.enableVideoAds=!0;a.o=!0;a.U=!1;a.location=null;a.j=null;a.i=null;a.s=!1;a.c=null;a.aa=!0;var c=!1;this.$get=["scriptInjector",function(k){function m(){var b=googletag.pubads();a.enableVideoAds&&b.enableVideoAds();a.o&&b.collapseEmptyDivs();b.disableInitialLoad();b.setForceSafeFrame(a.s);b.setCentering(a.U);
if(a.location)if("string"===typeof a.location)b.setLocation(a.location);else{if(!Array.isArray(a.location))throw new d;b.setLocation.apply(b,a.location)}if(a.j){if("string"!==typeof a.j)throw new d;b.setPublisherProvidedId(a.j)}if(a.i){if("object"!==typeof a.i)throw new d;for(var c in a.i)a.i.hasOwnProperty(c)&&b.setTargeting(c,a.i[c])}if(a.c){if("object"!==typeof a.i)throw new d;b.setSafeFrameConfig(a.c)}googletag.enableServices()}function e(){googletag.cmd.push(m);a.aa&&k(b).then(function(){c=!0})}
e.m=function(){return c};e.then=function(a){googletag.cmd.push(a)};return e}]}])})(z);
