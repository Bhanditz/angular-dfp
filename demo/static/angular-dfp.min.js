/*
 Apache
 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function y(e){var c=Error;function b(){}b.prototype=c.prototype;e.prototype=new b;e.prototype.constructor=e;for(var a in c)if(l.Object.defineProperties){var r=l.Object.getOwnPropertyDescriptor(c,a);void 0!==r&&l.Object.defineProperty(e,a,r)}else e[a]=c[a]}var googletag=googletag||{};googletag.cmd=googletag.cmd||[];var z=angular.module("angularDfp",[]);(function(e){e.factory("httpError",["$log",function(c){function b(a){c.error("Error ("+a.status+")")}b.Y=function(a){if("number"===typeof a)return!(200<=a&&300>a);console.assert("string"===typeof a);return"2"!==a[0]};return b}])})(z);(function(e){function c(){}y(c);c.a=Error.captureStackTrace;e.factory("parseDuration",function(){return function(b){if(void 0===b||null===b)throw new c;if("number"===typeof b)return b;if("string"!==typeof b)throw new TypeError("'"+b+"' must be of number or string type");var a=b.match(/(\d+)(m?s|min|h)?/);if(!a)throw new c;b=parseInt(a[1],10);2!==a.length&&(a=a[2],console.assert(/^(m?s|min|h)$/g.test(a)),b="ms"===a?b:"s"===a?1E3*b:"min"===a?6E4*b:36E5*b);return b}})})(z);(function(e){e.factory("responsiveResize",["$interval","$timeout","$window","dfpRefresh",function(c,b,a,r){a=angular.element(a);return function(f,e,d){function n(){return f.find("div iframe")}function p(a){a=a||n();a.css("width",a.attr("width")+"px");a.css("height",a.attr("height")+"px")}function t(){b(function(){f.removeClass("hidden")},1E3)}function v(a){var b=n();["width","height"].some(function(d){return b.attr(d)!==a[d]})&&p(b)}function g(a){var d=c(function(){return v(a)},100);b(function(){return c.cancel(d)},
2500)}function w(){var a=n(),a=[a.css("width"),a.css("height")].map(function(a){return a?a.slice(0,-2):null});return{width:a[0],height:a[1]}}function x(){g(w());a.on("resize",function(){p()});t()}d=d||[320,780,1480];console.assert(Array.isArray(d));a.on("resize",function(){function b(a){console.assert(0<=c&&c<d.length);console.assert(-1===a||1===a);c+=a;f.addClass("hidden");r(e).then(function(){x()});console.assert(0<=c&&c<d.length)}var c=function(){for(var b=a.innerWidth,c=d.length-1,r=0;r<c;++r)if(b<
d[r+1])return r;return c}();x();return function(){c+1>=d.length||a.innerWidth<d[c+1]?0>c-1||a.innerWidth>=d[c]||b(-1):b(1)}}())}}])})(z);(function(e){e.factory("scriptInjector",["$q","httpError",function(c,b){function a(a,f){function e(){n.resolve()}function d(a){a=a||{status:400};b(a,'loading script "{0}".',f);n.reject(a)}var n=c.defer();a.onreadystatechange=function(){4===this.readyState&&(b.Y(this.status)?d(this):e())};a.onload=e;a.onerror=d;return n.promise}return function(b){var c=document.createElement("script"),e="https:"===document.location.protocol;c.async="async";c.type="text/javascript";c.src=(e?"https:":"http:")+b;(document.head||
document.querySelector("head")).appendChild(c);return a(c,b)}}])})(z);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(e){function c(){var a=[],b=[],c=[],e=[],d=[];this.I=function(a){return void 0!==this[a]};this.D=function(){return 0!==a.length&&this.adUnit?!0:!1};this.l=function(){console.assert(this.D());return Object.freeze({sizes:a,G:b,ca:c,W:e,H:this.adUnit,B:this.I("forceSafeFrame"),m:this.safeFrameConfig,J:this.clickUrl,refresh:this.refresh,scripts:d,w:this.I("collapseIfEmpty")})};this.addSize=function(b){a.push(b)};this.O=function(a){b.push(a)};this.R=function(a){c.push(a)};this.N=function(a){e.push(a)};
this.P=function(a){d.push(a)}}function b(a,b,c,e,d){function n(a){if(0!==g.G.length){var b=googletag.sizeMapping();g.G.forEach(function(a){b.addSize(a.T,a.M)});a.defineSizeMapping(b.build())}}c=d.get("dfp");var p=d.get("dfpIDGenerator"),t=d.get("dfpRefresh"),v=d.get("responsiveResize"),g=e.l(),w=b;b=b[0];p(b);c.then(function(){var d=googletag.defineSlot(g.H,g.sizes,b.id);void 0!==g.B&&d.setForceSafeFrame(!0);g.J&&d.setClickUrl(g.J);g.w&&d.setCollapseEmptyDiv(!0,!0);g.m&&d.setSafeFrameConfig(JSON.parse(g.m));
n(d);g.ca.forEach(function(a){d.setTargeting(a.key,a.values)});g.W.forEach(function(a){d.setCategoryExclusion(a)});g.scripts.forEach(function(a){a(d)});d.addService(googletag.pubads());googletag.display(b.id);t(d,g.refresh).then(function(){0<g.G.length&&v(w,d)});a.$on("$destroy",function(){console.assert(googletag.destroySlots([d]))})})}e.directive("dfpAd",["$injector",function(a){return{restrict:"AE",controller:c,controllerAs:"controller",bindToController:!0,link:function(c){for(var e=[],h=0;h<arguments.length;++h)e[h-
0]=arguments[h];b.apply(null,e.slice(0,4).concat(a))},scope:{adUnit:"@",clickUrl:"@",forceSafeFrame:"@",safeFrameConfig:"@",refresh:"@",collapseIfEmpty:"@"}}}])})(z);(function(e){function c(b,a){var c=1E13*String(Math.random()),e="";b.H&&(e="dc_iu="+b.adUnit);var h="";b.u&&(h="ppid="+b.ppid);var d=document.createElement("img");d.src="https://pubads.g.doubleclick.net/activity;ord=";d.src+=c+";dc_seg="+b.segmentId+";"+e+h;d.width=1;d.height=1;d.border=0;d.style.visibility="hidden";a.append(d)}e.directive("dfpAudiencePixel",[function(){return{restrict:"E",link:c,scope:{adUnit:"@",segmentId:"@",ppid:"@"}}}])})(z);(function(e){function c(b,a,c,e){e.N(a.html())}e.directive("dfpExclusion",[function(){return{restrict:"E",require:"^^dfpAd",link:c}}])})(z);(function(e){e.factory("dfpIDGenerator",[function(){function c(a){if(a&&a.id&&!(a.id in b))return a.id;var c=null;do c="gpt-ad-"+Math.random().toString().slice(2);while(c in b);b[c]=!0;a&&(a.id=c);return c}var b={};c.a=function(a){return a in b};c.i=function(a){return!c.a(a)};return c}])})(z);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(e){function c(){}y(c);c.a=Error.captureStackTrace;e.provider("dfpRefresh",[function(){var b=this;b.b=null;b.f=null;b.F=!0;b.c=null;b.priority={refresh:1,interval:1,barrier:1};b.$get=["$rootScope","$interval","$q","parseDuration",function(a,e,f,h){function d(a,b,c){var e=f.defer();a={L:a,V:e};b&&C(a,b);b&&c||(d.K()?B(a):t([a]));return e.promise}function n(a){if("number"!==typeof a)throw new c;}function p(){for(var a=Object.keys(k).map(function(a){return k[a]}).filter(d.Z),c=a.map(function(a){return b.priority[a]}),
e=c.reduce(function(a,b){return Math.max(a,b)}),f=0;f<a.length;++f)if(c[f]===e)switch(a[f]){case k.s:v();break;case k.o:w();break;case k.h:console.assert(d.i());m.j=!0;break;default:console.assert(!1)}else switch(a[f]){case k.s:g();break;case k.o:x();break;case k.h:m.j=!1;break;default:console.assert(!1)}}function t(a){console.assert(void 0===a||null!==a);void 0===a?googletag.cmd.push(function(){googletag.pubads().refresh()}):0!==a.length&&(a=a.filter(function(a){return null!==a}),googletag.cmd.push(function(){googletag.pubads().refresh(a.map(function(a){return a.L}));
a.forEach(function(a){return a.V.resolve()})}))}function v(){console.assert(d.A());var a=e(function(){A();t()},b.c);q.refresh=a;m.refresh=!0}function g(){m.refresh&&(e.cancel(q.refresh),q.refresh=null,m.refresh=!1)}function w(){console.assert(d.v());var a=e(function(){t(u);A()},b.b);q.buffer=a;m.interval=!0}function x(){m.interval&&(e.cancel(q.buffer),q.buffer=null,m.interval=!1)}function A(){if(m.j)for(var a=0;a<u.length;++a)u[a]=null;else u=[]}function C(a,b){b=h(b);var c=e(function(){d.K()?B(a):
t([a])},b);q[a.L]=c}function B(a){u.push(a);m[k.h]&&u.length===b.f&&(t(u),u=[],b.F&&d.X())}var k=Object.freeze({s:"refresh",o:"interval",h:"barrier"});d.Options=Object.freeze({REFRESH:k.s,INTERVAL:k.o,BARRIER:k.h});var u=[],q={refresh:null,buffer:null},m=Object.seal({refresh:null!==b.c,interval:null!==b.b,j:null!==b.f});d.ua=function(a){if(!d.$(a))throw new c;e.cancel(q[a]);delete q[a];return d};d.$=function(a){return a in q};d.ma=function(a){console.assert(null!==a&&0<a);b.b=h(a);p();return d};d.va=
function(){if(!d.v())return console.warn("clearBufferInterval had no effect because no interval was set."),d;x();b.b=null;p();return d};d.v=function(){return null!==b.b};d.ta=function(){return m.interval};d.fa=function(){return b.b};d.la=function(a,c){b.f=a;b.F=void 0===c?!0:c;p();return d};d.X=function(){d.i()?(b.f=null,p()):console.warn("clearBufferBarrier had not effect because no barrier was set.")};d.ea=function(){return b.f};d.i=function(){return null!==b.f};d.ra=function(){return m.j};d.sa=
function(){return b.F};d.oa=function(a){console.assert(null!==a&&0<a);b.c=h(a);v();p();return d};d.A=function(){return null!==b.c};d.ja=function(){return m.refresh};d.wa=function(){d.A()||console.warn("clearRefreshInterval had no effect because no refresh interval was set.");g();p();return d};d.ha=function(){return b.c};d.K=function(){return m.j||m.interval};d.Z=function(a){switch(a){case k.s:return d.A();case k.o:return d.v();case k.h:return d.i();default:throw new c;}};d.C=function(a,d){if(!(a in
k))throw new c;n(d);b.priority[a]=d};d.a=function(a){if(!(a in k))throw new c;return b.priority[a]};d.pa=function(a){n(a);d.C("refresh",a)};d.ia=function(){return d.a("refresh")};d.ka=function(a){n(a);d.C("barrier",a)};d.da=function(){return d.a("barrier")};d.na=function(a){n(a);d.C("interval",a)};d.ga=function(){return d.a("interval")};a.$on("$destroy",function(){q.forEach(function(a){e.cancel(a)})});b.c&&(b.c=h(b.c));b.b&&(b.b=h(b.b));p();return d}]}])})(z);(function(e){function c(){function a(){return b.some(function(a){return"number"!==typeof a})?!1:0<c.length}var b=Object.seal([this.browserWidth,this.browserHeight||0]),c=[];this.addSize=function(a){c.push(a)};this.l=function(){console.assert(a());return Object.freeze({T:b,M:c})}}function b(a,b,c,e){a=a.controller.l();e.O(a)}c.a=["$scope"];e.directive("dfpResponsive",[function(){return{restrict:"E",require:"^^dfpAd",controller:c,controllerAs:"controller",bindToController:!0,link:b,scope:{browserWidth:"=",
browserHeight:"="}}}])})(z);(function(e){function c(b,a,c,e,h){a=h.get("dfpFormat")("(function(scope, {0}) { {1} })",b.ba||"slot",a.html().trim());e.P(eval(a).bind(null,b.scope))}e.directive("dfpScript",["$injector",function(b){return{restrict:"E",require:"^^dfpAd",scope:{ba:"@",scope:"="},link:function(a){for(var e=[],f=0;f<arguments.length;++f)e[f-0]=arguments[f];c.apply(null,e.concat(b))}}}])})(z);(function(e){function c(b,a,c,e){e=e[1]||e[0];console.assert(e);b.width&&b.height?e.addSize([b.width,b.height]):e.addSize(a[0].innerHTML)}e.directive("dfpSize",[function(){return{restrict:"E",require:["?^^dfpAd","?^^dfpResponsive"],scope:{width:"=",height:"="},link:c}}])})(z);(function(e){function c(){var a=this.value?[this.value]:[];this.D=function(){return void 0===this.key||0===a.length?!1:!0};this.l=function(){console.assert(this.D());return Object.freeze({key:this.key,values:a})};this.S=function(b){a.push(b)}}function b(a,b,c,e){console.assert(void 0!==e);a=a.controller.l();e.R(a)}e.directive("dfpTargeting",[function(){return{restrict:"E",require:"^^dfpAd",controller:c,controllerAs:"controller",bindToController:!0,scope:{key:"@",value:"@"},link:b}}])})(z);(function(e){function c(b,a,c,e){e.S(a.html())}e.directive("dfpValue",[function(){return{restrict:"E",require:"^^dfpTargeting",link:c}}])})(z);(function(e){function c(b,a,c,e){c=e.get("dfpIDGenerator");a=a[0];console.assert("VIDEO"===a.tagName);c(a);c=videojs(a.id);c.ima({id:a.id,qa:b.adTag});c.ima.requestAds();c.ima.initializeAdDisplayContainer()}e.directive("dfpVideo",["$injector",function(b){return{restrict:"A",scope:{adTag:"@"},link:function(a){for(var e=[],f=0;f<arguments.length;++f)e[f-0]=arguments[f];c.apply(null,e.slice(0,3).concat(b))}}}]);return e})(angular.module("angularDfp"));googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(e){function c(){}y(c);c.a=Error.captureStackTrace;e.constant("GPT_LIBRARY_URL","//www.googletagservices.com/tag/js/gpt.js");e.provider("dfp",["GPT_LIBRARY_URL",function(b){var a=this;a.enableVideoAds=!0;a.w=!0;a.U=!1;a.location=null;a.u=null;a.g=null;a.B=!1;a.m=null;a.aa=!0;var e=!1;this.$get=["scriptInjector",function(f){function h(){var b=googletag.pubads();a.enableVideoAds&&b.enableVideoAds();a.w&&b.collapseEmptyDivs();b.disableInitialLoad();b.setForceSafeFrame(a.B);b.setCentering(a.U);
if(a.location)if("string"===typeof a.location)b.setLocation(a.location);else{if(!Array.isArray(a.location))throw new c;b.setLocation.apply(b,a.location)}if(a.u){if("string"!==typeof a.u)throw new c;b.setPublisherProvidedId(a.u)}if(a.g){if("object"!==typeof a.g)throw new c;for(var d in a.g)a.g.hasOwnProperty(d)&&b.setTargeting(d,a.g[d])}if(a.m){if("object"!==typeof a.g)throw new c;b.setSafeFrameConfig(a.m)}googletag.enableServices()}function d(){googletag.cmd.push(h);a.aa&&f(b).then(function(){e=!0})}
d.i=function(){return e};d.then=function(a){googletag.cmd.push(a)};return d}]}])})(z);
