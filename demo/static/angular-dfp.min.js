/*
 Apache
 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var m="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function y(e){var c=Error;function b(){}b.prototype=c.prototype;e.prototype=new b;e.prototype.constructor=e;for(var a in c)if(m.Object.defineProperties){var A=m.Object.getOwnPropertyDescriptor(c,a);void 0!==A&&m.Object.defineProperty(e,a,A)}else e[a]=c[a]}var googletag=googletag||{};googletag.cmd=googletag.cmd||[];var z=angular.module("angularDfp",[]);(function(e){e.factory("httpError",["$log",function(c){function b(a){c.error("Error ("+a.status+")")}b.X=function(a){if("number"===typeof a)return!(200<=a&&300>a);console.assert("string"===typeof a);return"2"!==a[0]};return b}])})(z);(function(e){function c(){}y(c);c.a=Error.captureStackTrace;e.factory("parseDuration",function(){return function(b){if(void 0===b||null===b)throw new c;if("number"===typeof b)return b;if("string"!==typeof b)throw new TypeError("'"+b+"' must be of number or string type");var a=b.match(/((?:\d+)?.?\d+)(m?s|min|h)?/);if(!a)throw new c;b=parseInt(a[1],10);2!==a.length&&(a=a[2],console.assert(/^(m?s|min|h)$/g.test(a)),b="ms"===a?b:"s"===a?1E3*b:"min"===a?6E4*b:36E5*b);return b}})})(z);(function(e){e.factory("scriptInjector",["$q","httpError",function(c,b){function a(a,g){function e(){r.resolve()}function d(a){a=a||{status:400};b(a,'loading script "{0}".',g);r.reject(a)}var r=c.defer();a.onreadystatechange=function(){4===this.readyState&&(b.X(this.status)?d(this):e())};a.onload=e;a.onerror=d;return r.promise}return function(b){var c=document.createElement("script"),e="https:"===document.location.protocol;c.async="async";c.type="text/javascript";c.src=(e?"https:":"http:")+b;(document.head||
document.querySelector("head")).appendChild(c);return a(c,b)}}])})(z);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(e){function c(){var a=[],b=[],c=[],e=[],d=[];this.J=function(a){return void 0!==this[a]};this.F=function(){return 0!==a.length&&this.adUnit?!0:!1};this.l=function(){console.assert(this.F());return Object.freeze({sizes:a,v:b,ba:c,V:e,I:this.adUnit,C:this.J("forceSafeFrame"),m:this.safeFrameConfig,K:this.clickUrl,refresh:this.refresh,scripts:d,A:this.J("collapseIfEmpty")})};this.addSize=function(b){a.push(b)};this.O=function(a){b.push(a)};this.R=function(a){c.push(a)};this.N=function(a){e.push(a)};
this.P=function(a){d.push(a)}}function b(a,b,c,e,d){function r(a){if(0!==l.v.length){var b=googletag.sizeMapping();l.v.forEach(function(a){b.addSize(a.viewportSize,a.adSizes)});a.defineSizeMapping(b.build())}}function k(a){return a.map(function(a){return{width:a.viewportSize[0],height:a.viewportSize[1]}})}c=d.get("dfp");var p=d.get("dfpIDGenerator"),u=d.get("dfpRefresh"),v=d.get("dfpResponsiveResize"),l=e.l(),w=b;b=b[0];p(b);c.then(function(){var d=googletag.defineSlot(l.I,l.sizes,b.id);void 0!==
l.C&&d.setForceSafeFrame(!0);l.K&&d.setClickUrl(l.K);l.A&&d.setCollapseEmptyDiv(!0,!0);l.m&&d.setSafeFrameConfig(JSON.parse(l.m));r(d);l.ba.forEach(function(a){d.setTargeting(a.key,a.values)});l.V.forEach(function(a){d.setCategoryExclusion(a)});l.scripts.forEach(function(a){a(d)});d.addService(googletag.pubads());googletag.display(b.id);u(d,l.refresh).then(function(){if(0<l.v.length){var a=k(l.v);v(w,d,a)}});a.$on("$destroy",function(){console.assert(googletag.destroySlots([d]))})})}e.directive("dfpAd",
["$injector",function(a){return{restrict:"AE",controller:c,controllerAs:"controller",bindToController:!0,link:function(c){for(var e=[],h=0;h<arguments.length;++h)e[h-0]=arguments[h];b.apply(null,e.slice(0,4).concat(a))},scope:{adUnit:"@",clickUrl:"@",forceSafeFrame:"@",safeFrameConfig:"@",refresh:"@",collapseIfEmpty:"@"}}}])})(z);(function(e){function c(b,a){var c=1E13*String(Math.random()),e="";b.I&&(e="dc_iu="+b.adUnit);var h="";b.u&&(h="ppid="+b.ppid);var d=document.createElement("img");d.src="https://pubads.g.doubleclick.net/activity;ord=";d.src+=c+";dc_seg="+b.segmentId+";"+e+h;d.width=1;d.height=1;d.border=0;d.style.visibility="hidden";a.append(d)}e.directive("dfpAudiencePixel",[function(){return{restrict:"E",link:c,scope:{adUnit:"@",segmentId:"@",ppid:"@"}}}])})(z);(function(e){function c(b,a,c,e){e.N(a.html())}e.directive("dfpExclusion",[function(){return{restrict:"E",require:"^^dfpAd",link:c}}])})(z);(function(e){e.factory("dfpIDGenerator",[function(){function c(a){if(a&&a.id&&!(a.id in b))return a.id;var c=null;do c="gpt-ad-"+Math.random().toString().slice(2);while(c in b);b[c]=!0;a&&(a.id=c);return c}var b={};c.a=function(a){return a in b};c.i=function(a){return!c.a(a)};return c}])})(z);googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(e){function c(){}y(c);c.a=Error.captureStackTrace;e.provider("dfpRefresh",[function(){var b=this;b.b=null;b.f=null;b.G=!0;b.c=null;b.priority={refresh:1,interval:1,barrier:1};b.$get=["$rootScope","$interval","$q","parseDuration",function(a,e,g,h){function d(a,b,c){var e=g.defer();a={M:a,U:e};b&&C(a,b);b&&c||(d.L()?B(a):p([a]));return e.promise}function r(a){if("number"!==typeof a)throw new c;}function k(){var a=Object.keys(f).map(function(a){return f[a]}).filter(d.Y),c=a.map(function(a){return b.priority[a]}),
e=null;0<c.length&&(e=c.reduce(function(a,b){return Math.max(a,b)}));for(var g=0;g<a.length;++g)if(c[g]===e)switch(a[g]){case f.s:u();break;case f.o:l();break;case f.h:console.assert(d.i());n.j=!0;break;default:console.assert(!1)}else switch(a[g]){case f.s:v();break;case f.o:w();break;case f.h:n.j=!1;break;default:console.assert(!1)}}function p(a){console.assert(void 0===a||null!==a);void 0===a?googletag.cmd.push(function(){googletag.pubads().refresh()}):0!==a.length&&(a=a.filter(function(a){return null!==
a}),googletag.cmd.push(function(){googletag.pubads().refresh(a.map(function(a){return a.M}));a.forEach(function(a){return a.U.resolve()})}))}function u(){console.assert(d.B());var a=e(function(){x();p()},b.c);q.refresh=a;n.refresh=!0}function v(){n.refresh&&(e.cancel(q.refresh),q.refresh=null,n.refresh=!1)}function l(){console.assert(d.w());var a=e(function(){p(t);x()},b.b);q.buffer=a;n.interval=!0}function w(){n.interval&&(e.cancel(q.buffer),q.buffer=null,n.interval=!1)}function x(){if(n.j)for(var a=
0;a<t.length;++a)t[a]=null;else t=[]}function C(a,b){b=h(b);var c=e(function(){d.L()?B(a):p([a])},b);q[a.M]=c}function B(a){t.push(a);n[f.h]&&t.length===b.f&&(p(t),t=[],b.G&&d.W())}var f=Object.freeze({s:"refresh",o:"interval",h:"barrier"});d.Options=Object.freeze({REFRESH:f.s,INTERVAL:f.o,BARRIER:f.h});var t=[],q={refresh:null,buffer:null},n=Object.seal({refresh:null!==b.c,interval:null!==b.b,j:null!==b.f});d.ta=function(a){if(!d.Z(a))throw new c;e.cancel(q[a]);delete q[a];return d};d.Z=function(a){return a in
q};d.la=function(a){console.assert(null!==a&&0<a);b.b=h(a);k();return d};d.ua=function(){if(!d.w())return console.warn("clearBufferInterval had no effect because no interval was set."),d;w();b.b=null;k();return d};d.w=function(){return null!==b.b};d.sa=function(){return n.interval};d.ea=function(){return b.b};d.ka=function(a,c){b.f=a;b.G=void 0===c?!0:c;k();return d};d.W=function(){d.i()?(b.f=null,k()):console.warn("clearBufferBarrier had not effect because no barrier was set.")};d.da=function(){return b.f};
d.i=function(){return null!==b.f};d.qa=function(){return n.j};d.ra=function(){return b.G};d.na=function(a){console.assert(null!==a&&0<a);b.c=h(a);u();k();return d};d.B=function(){return null!==b.c};d.ia=function(){return n.refresh};d.va=function(){d.B()||console.warn("clearRefreshInterval had no effect because no refresh interval was set.");v();k();return d};d.ga=function(){return b.c};d.L=function(){return n.j||n.interval};d.Y=function(a){switch(a){case f.s:return d.B();case f.o:return d.w();case f.h:return d.i();
default:throw new c;}};d.D=function(a,d){if(!(a in f))throw new c;r(d);b.priority[a]=d};d.a=function(a){if(!(a in f))throw new c;return b.priority[a]};d.oa=function(a){r(a);d.D("refresh",a)};d.ha=function(){return d.a("refresh")};d.ja=function(a){r(a);d.D("barrier",a)};d.ca=function(){return d.a("barrier")};d.ma=function(a){r(a);d.D("interval",a)};d.fa=function(){return d.a("interval")};a.$on("$destroy",function(){q.forEach(function(a){e.cancel(a)})});b.c&&(b.c=h(b.c));b.b&&(b.b=h(b.b));k();return d}]}])})(z);(function(e){e.provider("dfpResponsiveResize",function(){var c=this;c.H=200;this.$get=["$interval","$timeout","$window","dfpRefresh","parseDuration",function(b,a,e,g,h){e=angular.element(e);c.H=h(c.H);return function(d,h,k){function p(){return d.find("div iframe")}function u(a){a=a||p();a.css("width",a.attr("width")+"px");a.css("height",a.attr("height")+"px")}function v(a){var b=p();["width","height"].some(function(d){return b.attr(d)!==a[d]})&&(u(b),d.parent().removeClass("refreshing"))}function l(d){var c=
b(function(){return v(d)},100);a(function(){return b.cancel(c)},2500)}function w(){var a=p(),a=[a.css("width"),a.css("height")].map(function(a){return a?a.slice(0,-2):null});return{width:a[0],height:a[1]}}function x(){l(w());e.on("resize",function(){u()})}k.sort(function(a,b){return a.width<b.width?-1:a.width>b.width?1:a.height<b.height?-1:a.height>b.height?1:0});e.on("resize",function(){function b(){g(h).then(function(){x()})}function e(g){console.assert(0<=f&&f<k.length);console.assert(-1===g||
1===g);f+=g;d.parent().addClass("refreshing");a(b,c.H);console.assert(0<=f&&f<k.length)}var f=function(){for(var a=window.innerWidth,b=window.innerHeight,d=k.length,c=1;c<d&&!(a<k[c].width)&&!(b<k[c].height);++c);return c-1}();x();return function(){f+1>=k.length||window.innerWidth<k[f+1].width||window.innerHeight<k[f+1].height?(0===f?0:window.innerWidth<k[f].width||window.innerHeight<k[f].height)&&e(-1):e(1)}}())}}]})})(z);(function(e){function c(){function a(){return b.some(function(a){return"number"!==typeof a})?!1:0<c.length}var b=Object.seal([this.viewportWidth,this.viewportHeight||0]),c=[];this.addSize=function(a){c.push(a)};this.l=function(){console.assert(a());return Object.freeze({viewportSize:b,adSizes:c})}}function b(a,b,c,e){a=a.controller.l();e.O(a)}c.a=["$scope"];e.directive("dfpResponsive",[function(){return{restrict:"E",require:"^^dfpAd",controller:c,controllerAs:"controller",bindToController:!0,link:b,
scope:{viewportWidth:"=",viewportHeight:"="}}}])})(z);(function(e){function c(b,a,c,e,h){a=h.get("dfpFormat")("(function(scope, {0}) { {1} })",b.aa||"slot",a.html().trim());e.P(eval(a).bind(null,b.scope))}e.directive("dfpScript",["$injector",function(b){return{restrict:"E",require:"^^dfpAd",scope:{aa:"@",scope:"="},link:function(a){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];c.apply(null,e.concat(b))}}}])})(z);(function(e){function c(b,a,c,e){e=e[1]||e[0];console.assert(e);b.width&&b.height?e.addSize([b.width,b.height]):e.addSize(a[0].innerHTML)}e.directive("dfpSize",[function(){return{restrict:"E",require:["?^^dfpAd","?^^dfpResponsive"],scope:{width:"=",height:"="},link:c}}])})(z);(function(e){function c(){var a=this.value?[this.value]:[];this.F=function(){return void 0===this.key||0===a.length?!1:!0};this.l=function(){console.assert(this.F());return Object.freeze({key:this.key,values:a})};this.S=function(b){a.push(b)}}function b(a,b,c,e){console.assert(void 0!==e);a=a.controller.l();e.R(a)}e.directive("dfpTargeting",[function(){return{restrict:"E",require:"^^dfpAd",controller:c,controllerAs:"controller",bindToController:!0,scope:{key:"@",value:"@"},link:b}}])})(z);(function(e){function c(b,a,c,e){e.S(a.html())}e.directive("dfpValue",[function(){return{restrict:"E",require:"^^dfpTargeting",link:c}}])})(z);(function(e){function c(b,a,c,e){c=e.get("dfpIDGenerator");a=a[0];console.assert("VIDEO"===a.tagName);c(a);c=videojs(a.id);c.ima({id:a.id,pa:b.adTag});c.ima.requestAds();c.ima.initializeAdDisplayContainer()}e.directive("dfpVideo",["$injector",function(b){return{restrict:"A",scope:{adTag:"@"},link:function(a){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];c.apply(null,e.slice(0,3).concat(b))}}}]);return e})(angular.module("angularDfp"));googletag=googletag||{};googletag.cmd=googletag.cmd||[];
(function(e){function c(){}y(c);c.a=Error.captureStackTrace;e.constant("GPT_LIBRARY_URL","//www.googletagservices.com/tag/js/gpt.js");e.provider("dfp",["GPT_LIBRARY_URL",function(b){var a=this;a.enableVideoAds=!0;a.A=!0;a.T=!1;a.location=null;a.u=null;a.g=null;a.C=!1;a.m=null;a.$=!0;var e=!1;this.$get=["scriptInjector",function(g){function h(){var b=googletag.pubads();a.enableVideoAds&&b.enableVideoAds();a.A&&b.collapseEmptyDivs();b.disableInitialLoad();b.setForceSafeFrame(a.C);b.setCentering(a.T);
if(a.location)if("string"===typeof a.location)b.setLocation(a.location);else{if(!Array.isArray(a.location))throw new c;b.setLocation.apply(b,a.location)}if(a.u){if("string"!==typeof a.u)throw new c;b.setPublisherProvidedId(a.u)}if(a.g){if("object"!==typeof a.g)throw new c;for(var d in a.g)a.g.hasOwnProperty(d)&&b.setTargeting(d,a.g[d])}if(a.m){if("object"!==typeof a.g)throw new c;b.setSafeFrameConfig(a.m)}googletag.enableServices()}function d(){googletag.cmd.push(h);a.$&&g(b).then(function(){e=!0})}
d.i=function(){return e};d.then=function(a){googletag.cmd.push(a)};return d}]}])})(z);
